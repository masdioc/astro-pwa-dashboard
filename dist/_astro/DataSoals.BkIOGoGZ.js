import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.CRVbtxaI.js";import{A as w}from"./client.Dpvk074T.js";function P(){const[c,g]=a.useState([]),[j,h]=a.useState([]),[u,y]=a.useState(!0),[l,N]=a.useState(10),[t,d]=a.useState(1),[n,m]=a.useState(""),[r,i]=a.useState(null);a.useEffect(()=>{fetch(w+"/api/soals").then(s=>s.json()).then(s=>{console.log("Data loaded:",s),g(s.soals)}).catch(s=>{console.error("Fetch error:",s),alert("Gagal memuat data")}).finally(()=>y(!1))},[]),a.useEffect(()=>{if(n){const s=n.toLowerCase();h(c.filter(o=>`${o.question}`.toLowerCase().includes(s)))}else h([])},[n,c]);const p=n?j:c,x=Math.ceil(p.length/l),b=(t-1)*l,f=b+l,v=p.slice(b,f);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4 max-w-screen-xl mx-auto",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Data Soal"}),e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-2 md:gap-4 items-start md:items-center",children:[e.jsx("input",{type:"text",placeholder:"Cari soal...",className:"px-4 py-2 border rounded w-full md:max-w-sm shadow-sm",value:n,onChange:s=>{m(s.target.value),d(1)}}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>m(""),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded text-sm",children:"Reset"}),e.jsx("button",{onClick:()=>alert("Export belum diimplementasikan"),className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded text-sm",children:"Export Excel"}),e.jsx("button",{onClick:()=>alert("Fitur tambah belum diimplementasikan"),className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded text-sm",children:"+ Tambah Soal"})]})]}),u?e.jsx("div",{className:"text-blue-600 mb-4",children:"⏳ Memuat data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("label",{htmlFor:"pageSize",className:"font-medium",children:"Tampilkan"}),e.jsx("select",{id:"pageSize",className:"border px-2 py-1 rounded",value:l,onChange:s=>{N(parseInt(s.target.value)),d(1)},children:[5,10,20,50].map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("span",{children:"baris per halaman"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300 text-sm",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"#"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Jenis"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Level"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Question"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Option A"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Option B"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Option C"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Option D"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Answer"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Aksi"})]})}),e.jsx("tbody",{children:v.map((s,o)=>e.jsxs("tr",{className:"hover:bg-blue-50 transition",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:(t-1)*l+o+1}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.jenis_soal}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.level_soal}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.question}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.a}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.b}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.c}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.d}),e.jsx("td",{className:"px-4 py-2 border-b",children:s.answer}),e.jsx("td",{className:"px-4 py-2 border-b",children:e.jsx("button",{onClick:()=>i(s),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Detail"})})]},s.id))})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-4 gap-2",children:[e.jsx("button",{onClick:()=>t>1&&d(t-1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded disabled:opacity-50",disabled:t===1,children:"Prev"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",t," of ",x]}),e.jsx("button",{onClick:()=>t<x&&d(t+1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded disabled:opacity-50",disabled:t===x,children:"Next"})]}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm transition-opacity duration-300",children:e.jsxs("div",{className:"animate-fade-in-scale bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md relative",children:[e.jsx("button",{onClick:()=>i(null),className:"absolute top-2 right-2 text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white",children:"✕"}),e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-100",children:"Detail Soal"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-200",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Pertanyaan:"})," ",r.question]}),e.jsxs("p",{children:[e.jsx("strong",{children:"A:"})," ",r.a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"B:"})," ",r.b]}),e.jsxs("p",{children:[e.jsx("strong",{children:"C:"})," ",r.c]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D:"})," ",r.d]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Jawaban:"})," ",r.answer.toUpperCase()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Pembahasan:"})," ",r.explanation]})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>i(null),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:"Tutup"})})]})})]})]})})}export{P as default};
