import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.CRVbtxaI.js";import{A as w}from"./client.Dpvk074T.js";function S(){const[i,b]=s.useState([]),[u,o]=s.useState([]),[j,y]=s.useState(!0),[n,f]=s.useState(10),[a,d]=s.useState(1),[l,m]=s.useState(""),[r,c]=s.useState(null);s.useEffect(()=>{fetch(w+"/api/users").then(t=>t.json()).then(t=>{console.log("Data loaded:",t),b(t.users)}).catch(t=>{console.error("Fetch error:",t),alert("Gagal memuat data")}).finally(()=>y(!1))},[]),s.useEffect(()=>{if(l){const t=l.toLowerCase();o(i.filter(g=>`${g.name}`.toLowerCase().includes(t)||g.email.toLowerCase().includes(t)))}else o([])},[l,i]);const h=l?u:i,x=Math.ceil(h.length/n),p=(a-1)*n,N=p+n,v=h.slice(p,N);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4 max-w-screen-xl mx-auto",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Data Pengguna"}),e.jsxs("div",{className:"mb-4 flex flex-col md:flex-row gap-2 md:gap-4 items-start md:items-center",children:[e.jsx("input",{type:"text",placeholder:"Cari nama atau email...",className:"px-4 py-2 border rounded w-full md:max-w-sm shadow-sm",value:l,onChange:t=>{m(t.target.value),d(1)}}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>m(""),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded text-sm",children:"Reset"}),e.jsx("button",{onClick:()=>alert("Export belum diimplementasikan"),className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded text-sm",children:"Export Excel"}),e.jsx("button",{onClick:()=>alert("Fitur tambah belum diimplementasikan"),className:"px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded text-sm",children:"+ Tambah Pengguna"})]})]}),j?e.jsx("div",{className:"text-blue-600 mb-4",children:"⏳ Memuat data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2 text-sm",children:[e.jsx("label",{htmlFor:"pageSize",className:"font-medium",children:"Tampilkan"}),e.jsx("select",{id:"pageSize",className:"border px-2 py-1 rounded",value:n,onChange:t=>{f(parseInt(t.target.value)),d(1)},children:[5,10,20,50].map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsx("span",{children:"baris per halaman"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300 text-sm",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-4 py-2 text-left",children:"ID"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Nama"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Email"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Level Pendidikan"}),e.jsx("th",{className:"border px-4 py-2 text-left",children:"Aksi"})]})}),e.jsx("tbody",{children:v.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50 transition",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:t.id}),e.jsx("td",{className:"px-4 py-2 border-b",children:t.name}),e.jsx("td",{className:"px-4 py-2 border-b",children:t.email}),e.jsx("td",{className:"px-4 py-2 border-b",children:t.level}),e.jsx("td",{className:"px-4 py-2 border-b",children:e.jsx("button",{onClick:()=>c(t),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Detail"})})]},t.id))})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-4 gap-2",children:[e.jsx("button",{onClick:()=>a>1&&d(a-1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded disabled:opacity-50",disabled:a===1,children:"Prev"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",a," of ",x]}),e.jsx("button",{onClick:()=>a<x&&d(a+1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded disabled:opacity-50",disabled:a===x,children:"Next"})]}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md relative",children:[e.jsx("button",{onClick:()=>c(null),className:"absolute top-2 right-2 text-gray-500 hover:text-gray-900 dark:text-gray-300",children:"✕"}),e.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-gray-100",children:"Detail Pengguna"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-200",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",r.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nama:"})," ",r.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",r.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Level User:"})," ",r.level]})]}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{onClick:()=>c(null),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:"Tutup"})})]})})]})]})})}export{S as default};
